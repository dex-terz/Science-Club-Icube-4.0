"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["codespaces-prebuild-configurations"],{70979:(e,t,n)=>{var r=n(57957),o=n(64287),i=n(21403),l=n(97797),s=n(56579),u=n(79049);async function a(e){if(!e)return;let t=e.getAttribute("data-codespace-geos").split(" ");if(!t)return;let n=document.querySelector(".js-codespaces-prebuilds-specific-regions"),r=document.querySelectorAll(".js-codespaces-prebuilds-locations"),o=document.getElementById("vscs_developer_target_location_input");n&&0!==r.length&&o&&(function(e,t){for(let n of(e.disabled=!1,t))n.disabled=!1,c(n,!0)}(n,r),function(e,t,n){for(let o of n){var r;(r=o.value,t.includes(r))?(o.disabled=!1,o.checked="true"===o.getAttribute("data-originally-checked"),function(e){e.dispatchEvent(new Event("change",{bubbles:!0}))}(o),c(o,!0)):(o.checked=!1,o.disabled=!0,e.checked=!0,e.disabled=!0,c(o,!1))}}(n,t,r))}function c(e,t){let n=e.parentElement?.querySelector(".js-codespaces-prebuilds-vscs-location-unavailable");n&&(n.hidden=t)}function d(e){let t=document.querySelector(".js-submit-codespace-prebuild-configuration-button"),n=document.querySelector(".js-codespaces-prebuilds-specific-regions");t&&n&&(e?t.disabled=!1:Array.from(document.querySelectorAll(".js-codespaces-prebuilds-locations")).some(e=>e.checked)||!n.checked?t.disabled=!1:t.disabled=!0)}async function m(e,t,n,r){let o=await fetch(e,{mode:"same-origin",method:"POST",body:t,headers:{Accept:"text/fragment+html","Scoped-CSRF-Token":n}});if(o.status<=400||[400,409,500].includes(o.status)){let e=(0,s.B)(document,await o.text());r?.parentElement?.replaceChild(e,r)}o.status>=400&&p()}function p(){let e=document.querySelector(".js-message")?.getAttribute("prebuild-data-error-message"),t=document.querySelector(".js-flash-error")?.value||e;if(t){let e=document.querySelector("template.js-flash-template");e?.after(new u.i4(e,{className:"flash-error",message:t}))}}function f(){return Array.from(document.getElementById("actors-to-notify")?.getElementsByTagName("li")||[]).map(e=>e.getAttribute("prebuild-data-bulk-actions-id-user"))}function y(){return Array.from(document.getElementById("actors-to-notify")?.getElementsByTagName("li")||[]).map(e=>e.getAttribute("prebuild-data-bulk-actions-id-team"))}function g(e,t){let n=new FormData;for(let t of e)null!==t&&n.append("codespaces_prebuild_configuration[users_to_notify][]",t);for(let e of t)null!==e&&n.append("codespaces_prebuild_configuration[teams_to_notify][]",e);return null===n.get("codespaces_prebuild_configuration[users_to_notify][]")&&n.append("codespaces_prebuild_configuration[users_to_notify][]",""),null===n.get("codespaces_prebuild_configuration[teams_to_notify][]")&&n.append("codespaces_prebuild_configuration[teams_to_notify][]",""),n}function b(){let e=!0,t=document.querySelectorAll(".js-delivery-day-input");if(t.length>0){let n=t[0]?.closest("#delivery-day-menu")||t[0]?.closest("#primer_experimental_selectpanel_weekdays-delivery-day-menu");e=!!n?.getAttribute("data-allow-blank")||Array.from(t).some(e=>e.checked),t[0].closest(".js-day-form-group").classList.toggle("errored",!e)}return e}function h(e){let t=e.querySelector(".js-delivery-time-summary"),n=function(e){let t=e.querySelectorAll("input.js-delivery-time-input:checked");return 0===t.length?null:Array.from(t).map(e=>e.value).join(", ")}(e)||t.getAttribute("data-default-label"),r=t.querySelector(".js-delivery-time-summary-text");r.textContent=n,r.setAttribute("title",n)}function v(e){let t=e.querySelector("input.js-delivery-time-zone-input:checked");if(t instanceof HTMLInputElement){let n=t.getAttribute("data-display-name")||"";e.querySelector(".js-delivery-time-zone-summary-text").textContent=n}else!function(e){let t=Intl.DateTimeFormat().resolvedOptions().timeZone||"",n=e.querySelector(`.js-delivery-time-zone-input[data-browser-name="${t}"], .js-delivery-time-zone-input[data-browser-name="Etc/UTC"]`);(0,r.m$)(n,!0)}(e)}(0,i.lB)(".js-prebuilds-view-runs-menu-item",{subscribe:e=>(0,o.Rt)(e,"socket:message",function(e){let t=e.currentTarget,n=t.parentElement?.querySelector("li.config-view-runs-item");t&&n&&(t.hidden=!0,n.hidden=!1)})}),(0,i.lB)(".js-codespaces-prebuilds-vscs-targets",e=>{a(e.querySelector(".js-codespaces-prebuilds-vscs-target:checked"))}),(0,l.on)("click",".js-codespaces-prebuilds-trigger",e=>{let t=e.currentTarget,n=document.getElementById("codespaces_prebuild_configuration_schedule");t&&n&&("schedule"===t.value?n.hidden=!1:n.hidden=!0)}),(0,l.on)("click",".js-codespaces-prebuilds-vscs-target",e=>{a(e.currentTarget)}),(0,l.on)("change",".js-codespaces-prebuilds-specific-regions",()=>{d(!1)}),(0,l.on)("change",".js-codespaces-prebuilds-locations",()=>{d(!1)}),(0,l.on)("click",".js-codespaces-toggle-advanced-options",()=>{let e=document.getElementById("advanced-options"),t=document.getElementById("toggle-advanced-options"),n=document.querySelector(".js-show-options")?.getAttribute("prebuild-show-advanced-options")??null,r=document.querySelector(".js-hide-options")?.getAttribute("prebuild-hide-advanced-options")??null;e&&t&&n&&r&&("none"===e.style.display?(e.style.display="block",t.textContent=r):(e.style.display="none",t.textContent=n))}),(0,l.on)("click",".member-suggestion",async function(e){if(!(e.target instanceof Element))return;let t=document.querySelector("input.auto-search-input"),n=t?.value,r=e.target.closest("li")?.getAttribute("data-user-or-team"),o=t?.getAttribute("data-controller-path-prebuild-update-actors"),i=document.getElementById("update-notifiers-csrf")?.getAttribute("value");if(!n||!i||!o||!r){p();return}let l=f(),s=y();"user"===r?l.push(n):"team"===r&&s.push(n);let u=g(l,s),a=document.getElementById("notify-options");if(null==a){p();return}m(o,u,i,a)}),(0,l.on)("click",".js-remove-user-button",async function(e){if(!(e.target instanceof Element))return;let t=document.querySelector("input.auto-search-input"),n=t?.getAttribute("data-controller-path-prebuild-update-actors"),r=document.getElementById("update-notifiers-csrf")?.getAttribute("value"),o=e.target.closest("li")?.getAttribute("prebuild-data-user-or-team"),i=null;if("user"===o?i=e.target.closest("li")?.getAttribute("prebuild-data-bulk-actions-id-user"):"team"===o&&(i=e.target.closest("li")?.getAttribute("prebuild-data-bulk-actions-id-team")),!i||!r||!n||!o){p();return}let l=f(),s=y();"user"===o?l=l.filter(e=>e!==i):"team"===o&&(s=s.filter(e=>e!==i));let u=g(l,s),a=document.getElementById("notify-options");if(null==a){p();return}m(n,u,r,a)}),(0,l.on)("click",".js-codespaces-branch",function(e){if(!(e.target instanceof Element))return;let t=e.target.closest(".js-codespaces-branch"),n=t?.getAttribute("data-refname");if(null==t||null==n)return;let r=document.getElementById("update-configuration")?.getAttribute("data-controller-path-update-config"),o=document.getElementById("update-config-csrf")?.getAttribute("value");if(null==r||null==o)return;let i=new FormData;i.append("codespaces_prebuild_configuration[branch]",n);let l=document.getElementById("devcontainer-path-select");null!=l&&m(r,i,o,l)}),(0,l.on)("change",".js-delivery-day-input",function(e){if(!(e.target instanceof Element))return;let t=e.target.closest(".js-orgs-reminders-day-menu");null!=t&&(function(e){let t=function(e){let t=Array.from(e.querySelectorAll("input.js-delivery-day-input")),n=t.filter(e=>e.checked);if(0===n.length)return null;if(t.every(e=>e.checked))return e.getAttribute("data-everyday");let r=t.filter(e=>e.classList.contains("js-delivery-day-weekday"));if(r.every(e=>e.checked)&&n.length===r.length)return e.getAttribute("data-weekdays");let o=t.filter(e=>e.classList.contains("js-delivery-day-weekend"));return o.every(e=>e.checked)&&n.length===o.length?e.getAttribute("data-weekends"):2===n.length?`${n[0].value} and ${n[1].value}`:n.map(e=>e.value).join(", ")}(e),n=e.querySelector(".js-delivery-day-summary");if(null==n)return;null==t&&(t=n.getAttribute("data-default-label"));let r=n.querySelector(".js-delivery-day-summary-text");r&&(r.textContent=t)}(t),b())});let _=e=>{let t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return[...new Set(e.sort((e,n)=>t.indexOf(e)-t.indexOf(n)))]};(0,l.on)("itemActivated","#primer_experimental_selectpanel_weekdays-delivery-day-menu",function(e){if(!(e.target instanceof Element))return;let{item:t,checked:n}=e.detail,{day:r,class_name:o}=JSON.parse(t?.children[0]?.getAttribute("data-value")),i=document.querySelector("#days");if(!i)return;let l=i.textContent?i.textContent.split(", "):[];if(n){i.textContent=_([...l,r]).join(", ");let e=document.querySelector("#prebuild-selected-weekdays-list"),t=e.querySelector("template").content.cloneNode(!0),n=t.querySelector("input");n.value=r,n.classList.add(o),t.querySelector("li").appendChild(document.createTextNode(r)),e.appendChild(t)}else i.textContent=l.filter(e=>e!==r).join(", "),document.querySelector(`#prebuild-selected-weekdays-list input[value="${r}"]`)?.parentElement?.remove();b()}),(0,l.on)("change",".js-delivery-time-input",function(e){e.target instanceof Element&&(h(e.target.closest(".js-orgs-reminders-time-menu")),function(){let e=!0,t=Array.from(document.querySelectorAll(".js-delivery-day-input")).some(e=>e.checked),n=document.querySelectorAll(".js-delivery-time-input");if(n.length>0){let r=!!n[0]?.closest(".js-orgs-reminders-time-menu")?.hasAttribute("data-allow-blank");e=Array.from(n).some(e=>e.checked)||r&&!t}n[0].closest(".js-time-form-group").classList.toggle("errored",!e)}())}),(0,l.on)("change",".js-delivery-time-zone-input",function(e){e.target instanceof Element&&v(e.target.closest(".js-orgs-reminders-time-zone-menu"))}),(0,i.lB)(".js-orgs-reminders-time-menu",h),(0,i.lB)(".js-orgs-reminders-time-zone-menu",v)},57957:(e,t,n)=>{n.d(t,{Cy:()=>s,K3:()=>c,Z8:()=>u,k_:()=>i,lK:()=>d,m$:()=>l});var r=n(4622);function o(e,t,n){return e.dispatchEvent(new CustomEvent(t,{bubbles:!0,cancelable:n}))}function i(e,t){t&&(function(e,t){if(!(e instanceof HTMLFormElement))throw TypeError("The specified element is not of type HTMLFormElement.");if(!(t instanceof HTMLElement))throw TypeError("The specified element is not of type HTMLElement.");if("submit"!==t.type)throw TypeError("The specified element is not a submit button.");if(!e||e!==t.form)throw Error("The specified element is not owned by the form element.")}(e,t),(0,r.A)(t)),o(e,"submit",!0)&&e.submit()}function l(e,t){if("boolean"==typeof t){if(e instanceof HTMLInputElement)e.checked=t;else throw TypeError("only checkboxes can be set to boolean value")}else{if("checkbox"===e.type)throw TypeError("checkbox can't be set to string value");e.value=t}o(e,"change",!1)}function s(e,t){for(let n in t){let r=t[n],o=e.elements.namedItem(n);o instanceof HTMLInputElement?o.value=r:o instanceof HTMLTextAreaElement&&(o.value=r)}}function u(e){if(!(e instanceof HTMLElement))return!1;let t=e.nodeName.toLowerCase(),n=(e.getAttribute("type")||"").toLowerCase();return"select"===t||"textarea"===t||"input"===t&&"submit"!==n&&"reset"!==n||e.isContentEditable}function a(e){return new URLSearchParams(e)}function c(e,t){let n=new URLSearchParams(e.search);for(let[e,r]of a(t))n.append(e,r);return n.toString()}function d(e){return a(new FormData(e)).toString()}},4622:(e,t,n)=>{function r(e){let t=e.closest("form");if(!(t instanceof HTMLFormElement))return;let n=o(t);if(e.name){let r=e.matches("input[type=submit]")?"Submit":"",o=e.value||r;n||((n=document.createElement("input")).type="hidden",n.classList.add("js-submit-button-value"),t.prepend(n)),n.name=e.name,n.value=o}else n&&n.remove()}function o(e){let t=e.querySelector("input.js-submit-button-value");return t instanceof HTMLInputElement?t:null}n.d(t,{A:()=>r,C:()=>o})},56579:(e,t,n)=>{n.d(t,{B:()=>r});function r(e,t){let n=e.createElement("template");return n.innerHTML=t,e.importNode(n.content,!0)}},64287:(e,t,n)=>{n.d(t,{Rt:()=>r,Zz:()=>o,yU:()=>Subscription});let Subscription=class Subscription{constructor(e){this.closed=!1,this.unsubscribe=()=>{e(),this.closed=!0}}};function r(e,t,n,o={capture:!1}){return e.addEventListener(t,n,o),new Subscription(()=>{e.removeEventListener(t,n,o)})}function o(...e){return new Subscription(()=>{for(let t of e)t.unsubscribe()})}}},e=>{var t=t=>e(e.s=t);e.O(0,["vendors-node_modules_github_selector-observer_dist_index_esm_js","vendors-node_modules_delegated-events_dist_index_js-node_modules_github_template-parts_lib_index_js"],()=>t(70979)),e.O()}]);
//# sourceMappingURL=codespaces-prebuild-configurations-5faf57a1d6b7.js.map